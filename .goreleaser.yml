# yaml-language-server: $schema=https://goreleaser.com/static/schema.json
version: 2
project_name: alveus
release:
  github:
    owner: wmcnamee-coreweave
    name: alveus
env:
  - CGO_ENABLED=0
builds:
  - goos:
      - linux
      - darwin
    goarch:
      - arm64
      - amd64
    dir: ./cmd/alveus
    main: .
    ldflags: -s -w -X main.version={{.Version}}
    binary: alveus
archives:
  - formats: [ tar.gz ]
    name_template: '{{ .Binary }}-{{ .Version }}-{{ .Os }}-{{ .Arch }}{{ if .Arm }}v{{ .Arm }}{{ end }}'
    files:
      - README*
snapshot:
  version_template: "{{ incpatch .Version }}-snapshot-{{ .Commit }}"
checksum:
  name_template: '{{ .ProjectName }}-{{ .Version }}-checksums.txt'
universal_binaries:
  - # Whether to remove the previous single-arch binaries from the artifact list.
    # If left as false, your end release might have as much as three
    # archives for macOS: 'amd64', 'arm64' and 'all'.
    replace: true

    # Set the modified timestamp on the output binary, typically
    # you would do this to ensure a build was reproducible.
    # Pass an empty string to skip modifying the output.
    #
    # Templates: allowed.
    mod_timestamp: "{{ .CommitTimestamp }}"
